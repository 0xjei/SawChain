syntax = "proto3";

package sawchain;

message Company {
    // Company unique identifier (First 10 characters of sha512 of adminPublicKey).
    string id = 1;

    // Company name.
    string name = 2;

    // Company description.
    string description = 3;

    // Company website.
    string website = 4;

    // Approximately when transaction was submitted, as a Unix UTC timestamp.
    uint64 timestamp = 5;

    // Company Admin public key.
    string adminPublicKey = 6;

    // List of Company Fields (only for production companies).
    repeated string fields = 7;

    // List of Company Operators.
    repeated string operators = 8;

    // List of Company Batches.
    repeated string batches = 9;
}


message Field {
    // Field identifier.
    string id = 1;

    // Field description.
    string description = 2;

    // Owner Company identifier.
    string company = 3;

    // Cultivated Product Type.
    string product = 4;

    // Predicted production quantity.
    float quantity = 5;

    // Location coordinates.
    Location location = 6;

    // List of recorded Events.
    repeated Event events = 7;
}

message Location {
    // Coordinates are expected to be in millionths of a degree
    sint64 latitude = 1;

    sint64 longitude = 2;
}

message Event {
    // Resource (Batch or Field) quantity to use for transformation events.
    message TransformationResource {
        // Batch/Field identifier.
        string resourceId = 1;

        // Quantity to use from resourceId.
        float quantity = 2;
    }

    // Event Parameter value.
    message EventParameterValue {
        // Event Parameter identifier.
        string parameterTypeId = 1;

        // Values fields. Only one of these fields should be used,
        // and it should match the type specified Type in EventParameterType.
        float floatValue = 2;
        string stringValue = 3;
        bytes bytesValue = 4;
    }

    // Event Type identifier.
    string eventTypeId = 1;

    // Public key of the transaction sender.
    string reporter = 2;

    // Unique identifiers of different EventParameterValues.
    repeated EventParameterValue values = 3;

    uint64 timestamp = 4;
}

/// todo in progress
message Batch {
    string product = 1;
    float quantity = 2;
    uint64 timestamp = 3;
    string parentField = 4; // (optional)
    repeated string parentBatches = 5;
    repeated Event events = 6;
    bool finalized = 7;
}

